# Pythonインタープリタの使い方

## インタープリタの起動

UNIXのシェルのサーチパスに/usr/local/binが入れてあれば、シェルで
```
$ python3.5
```
と入力するだけで起動できる。

インタープリタを置くディレクトリはインストール時に指定するものなので、他の場所にあることもある。

プライマリプロンプト（>>>）が出ているときに、ファイル終端キャラクタ（End Of File:EOF。UNIXではCtrl+Dキー、WindowsではCtrl+Zキー）を入力すると、インタープリタはコード0を返して終了する。
これがうまくいかないときは、インタープリタに `quit()` と入力してやれば終了できる。

対話型編集、ヒストリ置換、コード補完といったインタープリタの行編集機能は、readlineをサポートするシステムで使用できる。
コマンド行編集機能が使えるかどうかを確かめるには、起動したばかりのPythonプロンプトにCtrl+Pを入力してみる。
ビープ音が鳴れば、コマンド行編集機能が使える。何も起きなければ、使えない。

インタープリタの動作はUNIXシェルに似ており、標準入力がttyデバイスに接続された状態で起動した場合はコマンドを対話的に読み込んで実行するが、
引数にファイル名を与えたり、標準入力からファイルを与えて起動した場合はこのファイルに入った「スクリプト」を読み込んで実行する。

インタープリタを起動するには、
```
$ python -c {コマンド} {引数} ...
```
という方法もあり、これはシェルの-cオプションと同様に、コマンドにある文（複文も可）を実行する。
Pythonの文は、スペースその他のシェルにとって特殊なキャラクタを含むことが多いので、通常はコマンド部分全体をシングルクォートで囲んでおく。
```
$ python -c 'print ("Hello!!!")'
```

Python[モジュール](https://docs.python.org/ja/3/tutorial/modules.html)の中には、スクリプトとしても便利なものがある。これらは
```
$ python -m {モジュール名} {引数} ...
```
として呼び出すと、モジュールのソースファイル名を完全な形で指定したかのように実行される。
```
$ python -m module Hello!!
  Hello!!
```

スクリプトファイルを使う場合にも、スクリプトを走らせた後に対話モードに入れると便利、ということがある。
スクリプトファイル名の前に-iを入れることで、これが可能である。
```
$ python -i hello.py
```

全てのコマンドラインオプションは[Pythonのセットアップと利用](https://docs.python.org/ja/3/using/index.html)に載っている。

## 引数を渡す

インタープリタがスクリプト名と続く引数群を知らされると、これらは文字列のリストとなりsysモジュールの変数argvに割り当てられる。
import sysを実行することで、このリストにアクセスできる。
リストの長さは最小1である。

スクリプト名も引数も与えられないとき、sys.argv[0]は空の文字列となる。
スクリプト名が「-」になっていると、sys.argv[0]は「-」となる。「-c」コマンドの形式では、sys.argv[0]は「-c」となる。

```
$ python -c 'import sys
>quote print(sys.argv[0])'

結果 => -c

$ python -m arg
結果 => /Users/hltree/develop/Dogde/python/exam/part2/arg.py
```

## 対話モード

コマンドをttyから読み込んでいるとき、インタープリタは「対話モード」にあるという。

このモードでコマンド入力を促すプロンプトを「プライマリプロンプト」といい、これは通常、大なり記号３つである(>>>)。
継続行には「セカンダリプロンプト」が出てくるが、これはデフォルトではドット３つである（...）。
インタープリタは、バージョンと著作権からはじまるウェルカムメッセージを表示してからプロンプトを出す。

```
$ python
Python 3.7.4 (default, Mar 29 2020, 15:14:09)
[Clang 11.0.3 (clang-1103.0.32.29)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
```

複数行で論理構成する場合には、継続行が必要である。
例えばif文は次のようになる。

```
>>> judge = True
>>> if judge:
...  print('judge is true')
...
judge is true
```
